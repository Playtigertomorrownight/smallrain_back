<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <#include "/common/wechat_head.html"/>
    <link rel="stylesheet" type="text/css" href="../../static/css/wechat/article_list.css">
</head>
<body ontouchstart>
    <div id="app">
        <div class="header">
            <h2 align="center">${title}</h2>
        </div>
        <div class="cotainer">
           <div class="rg-list-contain" >
	           <ul class="rg-list" >
	              <li class="rg" v-for="rg in resourceGroupList" :key="rg.id" @click="showList(rg.id)">
	              	  <img src="../../static/image/rg-list.png" />
		              <div class="rg-content"> 
		                 <p class="rg-title">{{rg.name}}</p>
		                 <p class="rg-count" >共 <strong>{{showListData[rg.id]?showListData[rg.id].length:0}}</strong> 篇文章</p>
		                 <p class="rg-description">{{rg.name}}</p>
		              </div>
		              <div v-if="isResListShow(rg.id)">
			                 <ul  class="res-list" >
			                     <li class="res" v-for="res in showListData[rg.id]" :key="rg.id">
			                          <img src="../../static/image/article.png" />
						              <div> 
						                 <h3>{{res.name}}</h3>
						                 <p>{{res.name}}</p>
						              </div>
			                     </li>
			                 </ul>
		                 </div>
		         </li>
	           </ul>
           </div>
        </div>
        <div class="footer"></div>
    </div>
    <script type="text/javascript"> 
	    new Vue({
		    el: '#app',
		    data: function(){
		        return {
		            resourceList: ${resourceList},
		            resourceGroupList: ${resourceGroupList},
		            showListData: {},
		            resourceListShow: []
		        }
		    }, 
		    methods: {
		    	showList: function(rgId){
		    		console.log(rgId)
		    		console.log(this.resourceListShow[rgId])
		    		this.resourceListShow[rgId] = !this.resourceListShow[rgId];
		    		console.log(this.resourceListShow)
		    		/* for(let id in this.resourceListShow){
		    			if(rgId == id){
		    				
		    			}else{
		    				
		    			}
		    		} */
		    	},
		    	isResListShow: function(rgId){
		    		return this.resourceListShow[rgId];
		    	}
		    },
		    created : function() { //创建时
		    	if(this.resourceGroupList && this.resourceGroupList.length){
		    		for(let i=0,len=this.resourceGroupList.length;i<len;i++){
		    			let rg = this.resourceGroupList[i];
		    			if(!rg) continue;
		    			this.showListData[rg.id] = [];
		    			this.resourceListShow[rg.id] = false;
		    		}
		    		if(this.resourceList && this.resourceList.length){
		    			for(let i=0,len=this.resourceList.length;i<len;i++){
			    			let res = this.resourceList[i];
			    			if(!res) continue;
			    			this.showListData[res.groupId].push(res);
			    		}
		    		}
		    		console.log(this.showListData)
		    	}
		    }
	    });
    </script>
</body>
</html>
